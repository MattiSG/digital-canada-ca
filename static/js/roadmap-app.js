var app = app || {};

app.entriesToShow = 5;

$(function() {

    app.hideList = function() {
        $('.roadmap-action').each(function (index, value) { 
            if(index + 1 > app.entriesToShow) {
                $(this).hide();
            }
        });

        app.updateButton(0);
    }

    app.showList = function() {
        $('.roadmap-action').show();

        app.updateButton(1);
    }

    app.updateButton = function(expanded) {
        // Pull these from the data attribute of the button, since they're generated by Hugo's i18n functions:
        var showTextLabel = $('#actions-toggle-button').data('showText');
        var hideTextLabel = $('#actions-toggle-button').data('hideText');

        if(expanded) {
            $('#actions-toggle-button').data('expanded', 1).html('<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>' + ' ' + hideTextLabel);
        }
        else {
            $('#actions-toggle-button').data('expanded', 0).html('<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>' + ' ' + showTextLabel);
        }
    }

});

$(document).ready(function() {
	
	// Add target=_blank to external links
	// Thanks to http://css-tricks.com/snippets/jquery/open-external-links-in-new-window/
	$("#wb-cont a[href^='http://']").attr("target","_blank");
    $("#wb-cont a[href^='https://']").attr("target","_blank");
    
    // Hide all but the first five roadmap actions, until the user expands the list

    // Assign actions to the toggle button:
    $('#actions-toggle-button').click(function() {
        if($(this).data('expanded') == 1) {
            app.hideList();
        }
        else {
            app.showList();
        }
    });

    // Set initial state:
    app.hideList();

}); 